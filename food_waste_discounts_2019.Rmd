---
title: "food_waste_2019"
author: "Shelby Walsh"
date: "10/29/2020"
output: html_document
---

```{r setup, include=FALSE, message = FALSE, warning = FALSE, echo = FALSE}
rm(list = ls())
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library(tidyverse)
library(tidyr)
library(janitor)
library(kableExtra)
library(car)
library(devtools)
library(broom)
library(ggpubr)
library(ggbeeswarm)
library(RColorBrewer)
library(effsize)
library(stargazer)
```

Entering in 2019 Food waste data

```{r}
#only selecting items with a % discount code, these items are diverted foodwaste
item_discounts_2019 <- read_csv("item_discoun_food_waste_2019.csv") %>% 
  clean_names() %>%  
  select(item, quantity, reason, amount) %>% 
  group_by(item) %>% 
  filter(grepl('% off', reason))

```


```{r}
#sum the amount of each item and the cost do we can see how many items were diverted for report, might need to add calculation based on normal nada prices
discount_totals <- item_discounts_2019 %>% 
  summarise(quantity = sum(quantity), 
            cost = sum(amount))
```

first category: dairy
```{r}
dairy_product_category <- discount_totals %>% 
  filter(grepl('milk|Milk|Cream|cream', item))
```

(1) Egg Production
```{r}
eggs_category_1 <- discount_totals %>% 
 filter(grepl('Eggs|eggs', item))

#none in discounted section: Include code for future usage

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Eggs|eggs', discount_totals$item),]

# Product Category Code
eggs_category_1 <- eggs_category_1 %>%
  add_column(prod_cat = 1)
```

(2) Cheese manufacturing
```{r}
cheese_category_2 <- discount_totals %>% 
 filter(grepl('Cheese,|Charmisan|Cream Cheese|Feta', item))

#Again, no cheese in discounted items, but including code for future calculations

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Cheese,|Charmisan|Cream Cheese|Feta', discount_totals$item),]

# Product Category Code
cheese_category_2 <- cheese_category_2 %>%
  add_column(prod_cat = 2)
```

(3) Meat (except poultry)
```{r}
meats_category_3 <- discount_totals %>% 
 filter(grepl('Pepperoni|Bratwurst|Sausage|Chorizo|Jerky', item))

#Again another empty category, code for future use. Also the deli category isn't really used for deli products, but more miscellaneous 50% discount items

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Pepperoni|Bratwurst|Sausage|Chorizo|Jerky', discount_totals$item),]

# Product Category Code
meats_category_3 <- meats_category_3  %>%
  add_column(prod_cat = 3)
```

(13) Repurposed and Upcycled Materials
```{r}
scrap_category_13 <- discount_totals %>% 
 filter(grepl('Mill Factor', item))

#horray! the first item since dairy products! Code will be used to subract Mill factor out of discount_total and give it its product category number

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Mill Factor', discount_totals$item),]

# Product Category Code
scrap_category_13  <- scrap_category_13   %>%
  add_column(prod_cat = 13)

#woo it worked!!
```

(4) Fabric products
```{r}
fabrics_category_4 <- discount_totals %>% 
 filter(grepl('Fabric|Filter|Bag |Bag,|Wrap|Dryer|cloth|Cloth|Pads|Jersey,', item))

#another dud category. code input for constancy sake

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Fabric|Filter|Bag |Bag,|Wrap|Cloth|cloth|Pads,', discount_totals$item),]

# Product Category Code
fabrics_category_4 <- fabrics_category_4  %>%
  add_column(prod_cat = 4)
```

(5) Flours & flour mixes
```{r}
flours_category_5 <- discount_totals %>% 
 filter(grepl('Flour,|Flour |Pancake', item))

#again another goose egg category. My gut tells me that a majority of discounted products are milks, veggies, fruits, breads and condients. must continue forward with the code just incase

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Flour,|Flour |Pancake', discount_totals$item),]

# Product Category Code
flours_category_5 <- flours_category_5 %>%
  add_column(prod_cat = 5)

```

(6) Bread and bakery products
```{r}
#fingers crossed this actually picks up some of the 157 line items left
breads_category_6 <- discount_totals %>% 
 filter(grepl('Bread|Hamburger|Crouton|Loaf', item))

#sweet beans! 8 more items accounted for! Now to subract them so there are les than 150 line items to go

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Bread|Hamburger|Crouton|Loaf', discount_totals$item),]

# Product Category Code
breads_category_6 <- breads_category_6  %>%
  add_column(prod_cat = 6)

#highlight that scope_3 might have an error in breads
```

(7) Cookie, cracker, pasta, and tortilla
```{r}
cookie_category_7 <- discount_totals %>% 
 filter(grepl('Cookie|Macaron|Sinnabon|Muffin|Dough|Bakeshop|Cricket|Powerball|Crisp|Cracker|Tortilla|Pasta|Noodle|Rotini|Penne|Creste|Fettuccine', item))

#awesome 2 more down! lets get to subracting

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Cookie|Macaron|Sinnabon|Muffin|Dough|Bakeshop|Cricket|Powerball|Crisp|Cracker|Tortilla|Pasta|Noodle|Rotini|Penne|Creste|Fettuccine', discount_totals$item),]

# Product Category Code
cookie_category_7  <- cookie_category_7 %>%
  add_column(prod_cat = 7)
```

(8) Sugar and confectionery product manufacturing
```{r}
sugar_category_8 <- discount_totals %>% 
 filter(grepl('Sugar,', item))

#another empty category: insert extra code here

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Sugar,', discount_totals$item),]

# Product Category Code
sugar_category_8  <- sugar_category_8 %>%
  add_column(prod_cat = 8)
```

(9) Coffee and tea manufacturing
```{r}
coffee_category_9 <- discount_totals %>% 
 filter(grepl('Coffee|Tea,', item))

#EMPTY! ugggggggggg

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Coffee|Tea,', discount_totals$item),]

# Product Category Code
coffee_category_9   <- coffee_category_9 %>%
  add_column(prod_cat = 9)
```

(10) Fruit and vegetable canning, pickling, and drying
```{r}
dried_category_10 <- discount_totals %>% 
 filter(grepl('Dried|Raisins|Goji Berries,|Apple Rings|Figs|Pickle|Kimchi|Sauerkraut|Olives|Ginger Carrots|Mostarda', item))

#another 3 down! woot I can't wait for product category 26

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Dried|Raisins|Goji Berries,|Apple Rings|Figs|Pickle|Kimchi|Olives|Ginger Carrots|Mostarda', discount_totals$item),]

# Product Category Code
dried_category_10   <- dried_category_10 %>%
  add_column(prod_cat = 10)
```

(11) Fats and oils refining and blending
```{r}
oils_category_11 <- discount_totals %>% 
 filter(grepl('Oil', item))

#zero the not so hero

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Oil', discount_totals$item),]

# Product Category Code
oils_category_11   <- oils_category_11 %>%
  add_column(prod_cat = 11)
```

(12) Ice cream and frozen dessert manufacturing
```{r}
icecream_category_12 <- discount_totals %>% 
 filter(grepl('Ice Cream', item))

#another zero.... starting to regret picking this task lol

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Ice Cream', discount_totals$item),]

# Product Category Code
icecream_category_12   <- icecream_category_12 %>%
  add_column(prod_cat = 12)
```

(13) Flavoring Syrup and Concentrates
```{r}
syrup_category_13 <- discount_totals %>% 
 filter(grepl('Syrup|Concen', item))

#nothing

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Syrup|Concen', discount_totals$item),]

# Product Category Code
syrup_category_13   <- syrup_category_13 %>%
  add_column(prod_cat = 13)
```

(14) Dry, condensed, and evaporated dairy product manufacturing
```{r}

```


(17) Oilseed farming
```{r}
oilseed_category_17 <- discount_totals %>% 
 filter(grepl('Soy|Tofu', item))

#we got 3 woot woot

# Subtract those words from discount_totals
discount_totals <- discount_totals[!grepl('Soy|Tofu', discount_totals$item),]

# Product Category Code
oilseed_category_17   <- oilseed_category_17 %>%
  add_column(prod_cat = 17)
```
